<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>bar chart</title>
     <link rel="stylesheet" type="text/css" href="css/bar.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

</head>
<body>
    <div id="plot"></div>
    <script src="js/chartWithAxisTipShortCourseFunction.js"></script>
    <script>
        var longList = [];
        var shortList = [];
        var countList = [];
      function courseParser(d, options) {
        var long = options.long;
        var short = options.short;

        d.forEach(function(d){
            if (longList.indexOf(d[long]) == -1) {
              longList.push(d[long])
              shortList.push(d[short])
              countList.push(1)
            }
            var countIndex = longList.indexOf(d[long]);
            countList[countIndex] += 1;               
        });

        var courseList = [];
        for (var i =0; i <countList.length; i += 1) {
          var courseTemp = {
            "Long": longList[i],
            "Short": shortList[i],
            "Count": countList[i]
          };
          courseList.push(courseTemp)
        }

        return courseList;    
      }


        d3.csv("age_job_course.csv", function(d){
            // nameList for course:
            // var nameList = {"long": "Course Long Title", "short": "Course Short Title"};
            // nameList for degree: 
            var nameList = {"long": "LoE_DI", "short": "LoE_DI"};
            var data = courseParser(d, nameList);
            debugger;
            var updatableChart = barChart().width_svg(400).height_svg(400).data(data);
            d3.select('#plot').call(updatableChart);
        })   
    </script>

</body>
</html>
